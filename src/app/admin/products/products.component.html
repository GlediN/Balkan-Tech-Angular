<div>
  <h2>Products</h2>

  <div *ngIf="categoryId !== null">
    <p>Category ID: {{ categoryId }}</p>
  </div>

  <div *ngIf="products.length > 0; else noProducts">
    <ul>
      <li *ngFor="let product of products">
        <div *ngIf="!product.isEditing">
          <h4>{{ product.name }}</h4>
          <p>Description: {{ product.description }}</p>
          <p>Quantity: {{ product.quantity }}</p>
          <p>Price: ${{ product.price }}</p>
          <p>Discount: {{ product.discount }}</p>
          <p>Sold Quantity: {{ product.soldQty }}</p>
          <div *ngIf="product.productPhotos.length > 0">
            <div *ngFor="let photo of product.productPhotos">
              <img [src]="photo.productPhoto" alt="Product Image">
            </div>
          </div>

          <button (click)="editProduct(product)">Edit</button>
          <button (click)="deleteProduct(product.id)">Delete</button>
        </div>

        <ng-container *ngIf="product.isEditing">
          <form (submit)="saveEditedProduct(product)">
            <label for="editProductName">Name:</label>
            <input type="text" id="editProductName" name="name" [(ngModel)]="product.editableData.name" required>

            <label for="editProductDescription">Description:</label>
            <textarea id="editProductDescription" name="description" [(ngModel)]="product.editableData.description" required></textarea>

            <label for="editProductQuantity">Quantity:</label>
            <input type="number" id="editProductQuantity" name="quantity" [(ngModel)]="product.editableData.quantity" required>

            <label for="editProductPrice">Price:</label>
            <input type="number" id="editProductPrice" name="price" [(ngModel)]="product.editableData.price" required>

            <label for="editProductDiscount">Discount:</label>
            <input type="number" id="editProductDiscount" name="discount" [(ngModel)]="product.editableData.discount" required>
            <label for="editProductImageUrls">Image URLs:</label>
            <input type="text" id="editProductImageUrls" name="productImageUrls" [(ngModel)]="product.editableData.imageUrls">

            <button type="submit">Save</button>
            <button type="button" (click)="cancelEdit(product)">Cancel</button>
          </form>
        </ng-container>
      </li>
    </ul>
  </div>

  <ng-template #noProducts>
    <p>No products available for this category.</p>
  </ng-template>
  <div>
    <h3>Add Product</h3>
    <form #productForm="ngForm" (submit)="addProduct(productForm.value)">
      <label for="productName">Name:</label>
      <input type="text" id="productName" name="name" ngModel required>

      <label for="productDescription">Description:</label>
      <textarea id="productDescription" name="description" ngModel required></textarea>

      <label for="productQuantity">Quantity:</label>
      <input type="number" id="productQuantity" name="quantity" ngModel required>

      <label for="productPrice">Price:</label>
      <input type="number" id="productPrice" name="price" ngModel required>

      <label for="productDiscount">Discount:</label>
      <input type="number" id="productDiscount" name="discount" ngModel required>
      <label for="productImageUrls">Image URLs:</label>
      <input type="text" id="productImageUrls" name="productImageUrls" ngModel>

      <button type="submit">Add Product</button>
    </form>
  </div>
</div>
